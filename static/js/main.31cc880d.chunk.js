(window.webpackJsonptreatments=window.webpackJsonptreatments||[]).push([[0],{39:function(e,t,r){e.exports=r(80)},53:function(e,t,r){},54:function(e,t,r){},55:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},79:function(e,t,r){},80:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"rangeContainsTag",function(){return _}),n.d(a,"groupContainsTag",function(){return H}),n.d(a,"groupForTag",function(){return V}),n.d(a,"tagStrToObj",function(){return U}),n.d(a,"tagObjToStr",function(){return Z});var c={};n.r(c),n.d(c,"authorize",function(){return Ot}),n.d(c,"deauthorize",function(){return ht}),n.d(c,"loadList",function(){return pt}),n.d(c,"reloadOneCard",function(){return yt}),n.d(c,"putCard",function(){return Et}),n.d(c,"addLabelToCard",function(){return Nt});var o={};n.r(o),n.d(o,"saveTreatment",function(){return qt}),n.d(o,"fetch",function(){return xt}),n.d(o,"fetchConfig",function(){return Bt});var i={};n.r(i),n.d(i,"fetch",function(){return Wt}),n.d(i,"computeStats",function(){return $t});var u={};n.r(u),n.d(u,"fetch",function(){return or}),n.d(u,"saveDead",function(){return ur});var s={};n.r(s),n.d(s,"resized",function(){return vr}),n.d(s,"init",function(){return gr});var d={};n.r(d),n.d(d,"updateMsg",function(){return cn}),n.d(d,"showTreatmentEditor",function(){return on}),n.d(d,"hideTreatmentEditor",function(){return un}),n.d(d,"historySelectionChangeRequested",function(){return sn}),n.d(d,"historyGroupSortClicked",function(){return dn}),n.d(d,"changeRecord",function(){return ln}),n.d(d,"logout",function(){return fn}),n.d(d,"saveRecord",function(){return mn}),n.d(d,"init",function(){return bn});var l=n(2),f=n.n(l),m=n(34),b=n.n(m),v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var O=n(13),h=n(22),j=n(15),p=n(14),y=n(16),E=n(0),N=n(8),C=n(3);n(53);function w(){var e=Object(E.a)(["changeRecord"]);return w=function(){return e},e}function k(){var e=Object(E.a)(["msg"]);return k=function(){return e},e}function S(){var e=Object(E.a)(["treatments.colors"]);return S=function(){return e},e}function R(){var e=Object(E.a)(["record"]);return R=function(){return e},e}var T=Object(N.connect)({record:Object(C.state)(R()),colors:Object(C.state)(S()),msg:Object(C.state)(k()),changeRecord:Object(C.sequences)(w())},function(e){var t=e.colors[e.record.tag.color];return f.a.createElement("div",{className:"tagbar",style:{borderColor:e.record.is_saved?"#CCCCCC":"red"}},f.a.createElement("input",{className:"colortext",style:{color:t,borderColor:t},value:e.record.tag.color,type:"text",onChange:function(t){t.preventDefault(),e.changeRecord({tag:{color:t.target.value}})}}),f.a.createElement("input",{className:"numbertext",value:e.record.tag.number||"",type:"text",onChange:function(t){t.preventDefault(),e.changeRecord({tag:{number:+t.target.value}})}}))});n(54);function D(){var e=Object(E.a)(["msg"]);return D=function(){return e},e}var L=Object(N.connect)({msg:Object(C.state)(D())},function(e){return f.a.createElement("div",{className:"msg msg"+e.msg.type},e.msg.text)}),q=n(6),Y=n.n(q),x=(n(55),Object(N.connect)({},function(e){return f.a.createElement("div",{className:"treatmentcard"},f.a.createElement("div",{className:"treatmentcardcount"},e.record.tags.length," head"),"-",f.a.createElement("div",{className:"treatmentcardtreatment"},e.record.treatment),f.a.createElement("div",{className:"treatmentcardtags"},Y.a.map(e.record.tags,function(e,t){return f.a.createElement("div",{className:"treatmentcardtag",key:"treatmentcardtag"+t},e.color+e.number)})))}));function B(){var e=Object(E.a)(["record"]);return B=function(){return e},e}function z(){var e=Object(E.a)(["treatments.records"]);return z=function(){return e},e}function A(){var e=Object(E.a)(["historySelector"]);return A=function(){return e},e}var M=Object(N.connect)({historySelector:Object(C.state)(A()),treatmentRecords:Object(C.state)(z()),record:Object(C.state)(B())},function(e){var t=Y.a.filter(e.treatmentRecords,function(t){return t.date===e.record.date});t=Y.a.reverse(Y.a.sortBy(t,function(e){return e.dateLastActivity}));var r=Y.a.reduce(t,function(e,t){return e+t.tags.length},0);return f.a.createElement("div",{className:"history"},f.a.createElement("div",{className:"historytitle"},e.record.date+": "+r," head total."),Y.a.map(t,function(e,t){return f.a.createElement(x,{key:"treatmentcard"+t,record:Y.a.clone(e),recordindex:t})}))}),F=n(17),I=n.n(F),P=n(5),G=n.n(P),W=n(20),$=n.n(W),_=function(e,t){return t.color===e.start.color&&t.number>=e.start.number&&t.number<=e.end.number},H=function(e,t){return G.a.find(e.tag_ranges,function(e){return _(e,t)})},V=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=G.a.filter(e,function(e){return H(e,t)});if(!n||n.length<1)return!1;r=r?$()(r,"YYYY-MM-DD"):$()();var a=G.a.filter(n,function(e){return!$()(e.date,"YYYY-MM-DD").isAfter(r)});if(!a)return console.log("WARNING: groupForTag: found multiple possible groups, but after filtering for date there were none left!"),!1;var c=G.a.sortBy(a,function(e){return e.date});return c[c.length-1]},U=function(e){var t=e.trim().match(/^([A-Za-z]+) ?([0-9]+)?$/);return t?{color:t[1],number:+t[2]||1}:{color:"NOTAG",number:1}},Z=function(e){return e?(e.color||"")+""+(e.number||""):""};function J(){var e=Object(E.a)(["incoming"]);return J=function(){return e},e}function K(){var e=Object(E.a)(["record"]);return K=function(){return e},e}function Q(){var e=Object(E.a)(["treatments.records"]);return Q=function(){return e},e}function X(){var e=Object(E.a)(["historySelector"]);return X=function(){return e},e}var ee=Object(N.connect)({historySelector:Object(C.state)(X()),treatmentRecords:Object(C.state)(Q()),record:Object(C.state)(K()),incoming:Object(C.state)(J())},function(e){var t=a.groupForTag(e.incoming.records,e.record.tag,e.record.date),r=Y.a.filter(e.treatmentRecords,function(r){return Y.a.find(r.tags,function(n){if(n.number!==e.record.tag.number||n.color!==e.record.tag.color)return!1;var c=a.groupForTag(e.incoming.records,n,r.date);return t.groupname===c.groupname})});r=Y.a.reverse(Y.a.sortBy(r,function(e){return e.date})),console.log("recordsfortag = ",r);var n=-1;return f.a.createElement("div",{className:"historytag"},Y.a.map(r,function(e,t){var r=I()().diff(I()(e.date,"YYYY-MM-DD"),"days"),a=r+" days ago";0===r&&(a="today"),1===r&&(a="yesterday");var c="(+"+(r-n)+")";return n<0&&(c=""),n=r,f.a.createElement("div",{className:"historytagentry",key:"historyline"+t},f.a.createElement("div",{className:"historytreatment"},e.treatment),f.a.createElement("div",{className:"historyduration"},a," ",c))}))}),te=n(25),re=n.n(te);n(56);function ne(){var e=Object(E.a)(["historyGroupSortClicked"]);return ne=function(){return e},e}function ae(){var e=Object(E.a)(["historyGroup.sort"]);return ae=function(){return e},e}function ce(){var e=Object(E.a)(["record"]);return ce=function(){return e},e}function oe(){var e=Object(E.a)(["dead"]);return oe=function(){return e},e}function ie(){var e=Object(E.a)(["treatments"]);return ie=function(){return e},e}function ue(){var e=Object(E.a)(["incoming.records"]);return ue=function(){return e},e}function se(){var e=Object(E.a)(["historySelector"]);return se=function(){return e},e}var de=Object(N.connect)({historySelector:Object(C.state)(se()),groups:Object(C.state)(ue()),treatments:Object(C.state)(ie()),dead:Object(C.state)(oe()),record:Object(C.state)(ce()),sortBy:Object(C.state)(ae()),sortBySignal:Object(C.sequences)(ne())},function(e){var t=e.groups,r=V(e.groups,e.record.tag);return r&&(t=[r]),Y.a.each(t,function(t){t.dead&&t.dead.length,Y.a.reduce(Y.a.keys(e.treatments.tagIndex),function(r,n){var a=e.treatments.tagIndex[n];if(a[t.groupname]){!!e.dead.tagIndex[n]&&e.dead.tagIndex[n][t.groupname],a.treatments.length;var c=a.treatments.length;r[c]||(r[c]={numdead:[],numalive:[]})}},[])}),t=Y.a.sortBy(t,function(t){return"date"===e.sortBy?t.day:"name"===e.sortBy?t.groupname:"head"===e.sortBy?t.head:"pd"===e.sortBy?(t.dead?t.dead.length:0)/(t.head?t.head:1):t.day}),t=Y.a.reverse(t),f.a.createElement("div",{className:"historygroup"},r?" Showing group for current tag: "+e.record.tag.color+e.record.tag.number:"",f.a.createElement("table",{width:"100%"},f.a.createElement("tbody",null,f.a.createElement("tr",null,f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"name"})}},"Name"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"days"})}},"Days"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"head"})}},"Head"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd"})}},"P(D)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_0"})}},"P(D|0T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_1"})}},"P(D|1T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_2"})}},"P(D|2T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_3"})}},"P(D|3T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_4"})}},"P(D|4T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_5"})}},"P(D|5T)"),f.a.createElement("th",{onClick:function(){return e.sortBySignal({sort:"pd_6"})}},"P(D|6+)")),Y.a.map(t,function(e,t){var r=0;e.dead&&e.head&&(r=e.dead.length/e.head);var n=e.groupname;return n.length>15&&(n=n.slice(0,6)+"..."+n.slice(-6)),f.a.createElement("tr",{className:r<.05?"historygroupgood":r<.1?"historygroupmeh":"historygroupbad",key:"historygrouprow"+t},f.a.createElement("td",{className:"historygroupname"},f.a.createElement("span",{name:"historygroupnamepill"},n)),f.a.createElement("td",{className:"historygroupdate"}," ",I()(e.date,"YYYY-MM-DD").format("M/DD/YY")),f.a.createElement("td",{className:"historygroupdead"},e.dead?e.dead.length:0),f.a.createElement("td",{className:"historygroupperc"},r>0?"("+re()(r).format("0.00%")+")":""))}))))}),le=n(36);function fe(){var e=Object(E.a)(["record"]);return fe=function(){return e},e}function me(){var e=Object(E.a)(["dead.records"]);return me=function(){return e},e}function be(){var e=Object(E.a)(["historySelector"]);return be=function(){return e},e}var ve=Object(le.extendMoment)(I.a),ge=Object(N.connect)({historySelector:Object(C.state)(be()),deadRecords:Object(C.state)(me()),record:Object(C.state)(fe())},function(e){var t=ve(),r=ve.range(t.clone().subtract(1,"months"),t),n=ve.range(t.clone().subtract(3,"months"),t),a=ve.range(t.clone().subtract(1,"years"),t),c=Y.a.filter(e.deadRecords,function(e){return ve(e.date,"YYYY-MM-DD").within(r)}),o=Y.a.filter(e.deadRecords,function(e){return ve(e.date,"YYYY-MM-DD").within(n)}),i=Y.a.filter(e.deadRecords,function(e){return ve(e.date,"YYYY-MM-DD").within(a)}),u=Y.a.reduce(c,function(e,t){return e+t.tags.length},0),s=Y.a.reduce(o,function(e,t){return e+t.tags.length},0),d=Y.a.reduce(i,function(e,t){return e+t.tags.length},0);return f.a.createElement("div",{className:"historydead"},f.a.createElement("div",{className:"historydeadentry"},"Past month: ",u," dead (",re()(u/r.diff("days")).format("0.00"),"/day)"),f.a.createElement("div",{className:"historydeadentry"},"Past 3 months: ",s," dead (",re()(s/n.diff("days")).format("0.00"),"/day)"),f.a.createElement("div",{className:"historydeadentry"},"Past year: ",d," dead (",re()(d/a.diff("days")).format("0.00"),"/day)"))});n(57);function Oe(){var e=Object(E.a)(["logout"]);return Oe=function(){return e},e}var he=Object(N.connect)({logout:Object(C.sequences)(Oe())},function(e){return f.a.createElement("div",{className:"prefs"},f.a.createElement("p",{className:"prefslink",href:"#",onClick:function(t){e.logout(),t.preventDefault()}},"Change Trello Account"))});n(58);function je(){var e=Object(E.a)(["historySelector"]);return je=function(){return e},e}var pe=Object(N.connect)({historySelector:Object(C.state)(je())},function(e){var t=f.a.createElement("div",{className:"history"},"Unknown History Type");switch(e.historySelector.active){case"date":t=f.a.createElement(M,null);break;case"tag":t=f.a.createElement(ee,null);break;case"group":t=f.a.createElement(de,null);break;case"time":t=f.a.createElement(ge,null);break;case"prefs":t=f.a.createElement(he,null)}return t}),ye=n(37),Ee=n.n(ye);n(60);function Ne(){var e=Object(E.a)(["historySelectionChangeRequested"]);return Ne=function(){return e},e}function Ce(){var e=Object(E.a)(["historySelector"]);return Ce=function(){return e},e}var we=Object(N.connect)({historySelector:Object(C.state)(Ce()),historySelectionChangeRequested:Object(C.sequences)(Ne())},function(e){return f.a.createElement("div",{className:"historyselector"},f.a.createElement("div",{className:"historyselectorbutton "+("prefs"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"prefs"})}},f.a.createElement(Ee.a,{name:"bars"})),f.a.createElement("div",{className:"historyselectorbutton "+("date"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"date"})}},"Date"),f.a.createElement("div",{className:"historyselectorbutton "+("tag"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"tag"})}},"Tag"),f.a.createElement("div",{className:"historyselectorbutton "+("group"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"group"})}},"Group"),f.a.createElement("div",{className:"historyselectorbutton "+("time"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"time"})}},"Time"))});n(61);function ke(){var e=Object(E.a)(["historySelector"]);return ke=function(){return e},e}function Se(){var e=Object(E.a)(["windowSize"]);return Se=function(){return e},e}var Re=Object(N.connect)({windowSize:Object(C.state)(Se()),historySelector:Object(C.state)(ke())},function(e){var t="98vh",r=e.historySelector.active;return"portrait"===e.windowSize.orientation&&"group"!==r&&"time"!==r&&(t="49vh"),f.a.createElement("div",{className:"tagpane",style:{maxHeight:t}},f.a.createElement(T,null),f.a.createElement(L,null),f.a.createElement(we,null),f.a.createElement(pe,null))}),Te=(n(62),Object(N.connect)({},function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"keypressed",value:function(e){8===e.keyCode&&(this.props.onBackspace(),e.preventDefault());var t=e.keyCode-48;t>=0&&t<=9&&(this.props.onNumber(t),e.preventDefault())}},{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.keypressed.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.keypressed.bind(this))}},{key:"numberClicked",value:function(e){var t=this;return function(r){r.preventDefault(),t.props.onNumber(e)}}},{key:"clearClicked",value:function(e){e.preventDefault(),this.props.onClear()}},{key:"backspaceClicked",value:function(e){e.preventDefault(),this.props.onBackspace()}},{key:"renderCalcRow",value:function(e){var t=this;return f.a.createElement("div",{className:"keypadrow"},e.map(function(e){return f.a.createElement("div",{className:"keypadbutton",key:"calcwrap"+(Y.a.isObject(e)?e.val:e),onClick:Y.a.isObject(e)?e.clicked:t.numberClicked(e).bind(t)},Y.a.isObject(e)?e.val:e)}))}},{key:"render",value:function(){return f.a.createElement("div",{className:"keypad"},this.renderCalcRow([1,2,3]),this.renderCalcRow([4,5,6]),this.renderCalcRow([7,8,9]),this.renderCalcRow([{val:"C",clicked:this.clearClicked.bind(this)},0,{val:"<--",clicked:this.backspaceClicked.bind(this)}]))}}]),t}(f.a.Component)));n(63);function De(){var e=Object(E.a)(["changeRecord"]);return De=function(){return e},e}function Le(){var e=Object(E.a)(["treatments.colors"]);return Le=function(){return e},e}function qe(){var e=Object(E.a)(["record"]);return qe=function(){return e},e}var Ye=Object(N.connect)({record:Object(C.state)(qe()),colors:Object(C.state)(Le()),changeRecord:Object(C.sequences)(De())},function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"keypressed",value:function(e){var t="";switch(e.key){case"y":t="YELLOW";break;case"g":t="GREEN";break;case"b":t="BLUE";break;case"r":t="RED";break;case"p":t="PURPLE";break;case"w":t="WHITE";break;case"n":t="NOTAG";break;default:return}e.preventDefault(),this.props.changeRecord({tag:{color:t}})}},{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.keypressed.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.keypressed.bind(this))}},{key:"colorButtonClicked",value:function(e){var t=this.props;return function(r){r.preventDefault(),t.changeRecord({tag:{color:e}})}}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:"colorbar"},Y.a.keys(this.props.colors).map(function(t,r){return f.a.createElement("div",{key:"color"+t,className:"colorbutton",onClick:e.colorButtonClicked(t),style:{backgroundColor:e.props.colors[t]}})}),f.a.createElement("div",{key:"colorNOTAG",className:"colorbutton",onClick:this.colorButtonClicked("NOTAG"),style:{backgroundColor:"#CCCCCC"}},"N"))}}]),t}(f.a.Component));n(64);function xe(){var e=Object(E.a)(["showTreatmentEditor"]);return xe=function(){return e},e}function Be(){var e=Object(E.a)(["changeRecord"]);return Be=function(){return e},e}function ze(){var e=Object(E.a)(["treatments.treatmentCodes"]);return ze=function(){return e},e}function Ae(){var e=Object(E.a)(["record"]);return Ae=function(){return e},e}var Me=Object(N.connect)({record:Object(C.state)(Ae()),treatmentCodes:Object(C.state)(ze()),changeRecord:Object(C.sequences)(Be()),showTreatmentEditor:Object(C.sequences)(xe())},function(e){var t=function(t){t.preventDefault(),e.showTreatmentEditor()};return f.a.createElement("div",{className:"treatmentdatebar"},f.a.createElement("input",{className:"treatmentdateinput",value:e.record.date,type:"date",onChange:function(t){t.preventDefault(),e.changeRecord({date:t.target.value})}}),f.a.createElement("input",{className:"treatmentstring",value:e.record.treatment,type:"text",onClick:t,onChange:t}))});n(65);function Fe(){var e=Object(E.a)(["saveRecord"]);return Fe=function(){return e},e}function Ie(){var e=Object(E.a)(["changeRecord"]);return Ie=function(){return e},e}function Pe(){var e=Object(E.a)(["recordsValid"]);return Pe=function(){return e},e}function Ge(){var e=Object(E.a)(["treatments.treatmentCodes"]);return Ge=function(){return e},e}function We(){var e=Object(E.a)(["colors"]);return We=function(){return e},e}function $e(){var e=Object(E.a)(["record"]);return $e=function(){return e},e}var _e=Object(N.connect)({record:Object(C.state)($e()),colors:Object(C.state)(We()),treatmentCodes:Object(C.state)(Ge()),recordsValid:Object(C.state)(Pe()),changeRecord:Object(C.sequences)(Ie()),saveRecord:Object(C.sequences)(Fe())},function(e){var t=e.recordsValid&&e.record.tag&&e.record.tag.number&&e.record.tag.color;return f.a.createElement("div",{className:"recordinput"},f.a.createElement(Ye,null),f.a.createElement(Me,null),f.a.createElement(Te,{onNumber:function(t){var r=""+(e.record.tag.number||"");e.changeRecord({tag:{number:r+t}})},onClear:function(){e.changeRecord({tag:{number:"",color:""}})},onBackspace:function(){var t=""+e.record.tag.number;t.length>0&&(t=t.slice(0,-1)),e.changeRecord({tag:{number:+t}})}}),f.a.createElement("div",{className:"savebutton "+(t?"savebuttonenabled":"savebuttondisabled"),onClick:function(r){t&&(r.preventDefault(),e.saveRecord())}},"SAVE TREATMENT"))});n(66);function He(){var e=Object(E.a)(["hideTreatmentEditor"]);return He=function(){return e},e}function Ve(){var e=Object(E.a)(["changeRecord"]);return Ve=function(){return e},e}function Ue(){var e=Object(E.a)(["treatments.records"]);return Ue=function(){return e},e}function Ze(){var e=Object(E.a)(["treatments.treatmentCodes"]);return Ze=function(){return e},e}function Je(){var e=Object(E.a)(["record"]);return Je=function(){return e},e}var Ke=Object(N.connect)({record:Object(C.state)(Je()),treatmentCodes:Object(C.state)(Ze()),treatmentRecords:Object(C.state)(Ue()),changeRecord:Object(C.sequences)(Ve()),hideTreatmentEditor:Object(C.sequences)(He())},function(e){var t=function(t){var r=t.match(/([A-Z]([a-z]+)?)/g);return r||(r=[]),Y.a.map(e.treatmentCodes,function(e){return{code:e.code,name:e.name,on:!!Y.a.find(r,function(t){return e.code===t})}})},r=function(e){return Y.a.join(Y.a.map(Y.a.filter(e,function(e){return e.on}),function(e){return e.code}),"")},n=function(t){return function(r){return e.changeRecord({treatment:t})}},a=Y.a.keyBy(t(e.record.treatment),function(e){return e.code}),c=function(){var t=Y.a.reverse(Y.a.sortBy(e.treatmentRecords,[function(e){return e.date},function(e){return e.dateLastActivity}]));return Y.a.reduce(t,function(e,t){return e.length>=5?e:Y.a.includes(e,t.treatment)?e:(e.push(t.treatment),e)},[])}();return f.a.createElement("div",{className:"treatmentEditor"},f.a.createElement("input",{className:"treatmentEditorTextInput",type:"text",value:e.record.treatment,onChange:function(t){t.preventDefault(),e.changeRecord({treatment:t.target.value()})}}),f.a.createElement("div",{className:"treatmentCodesList"},Y.a.map(e.treatmentCodes,function(n,c){return f.a.createElement("div",{className:"treatmentCodeButton "+(a[n.code].on?"codeOn":"codeOff"),key:"treatmentCodeButton"+c,onClick:(o=n.code,function(n){var a=t(e.record.treatment),c=Y.a.findIndex(a,function(e){return e.code===o});c<0||(a[c].on=!a[c].on,e.changeRecord({treatment:r(a)}))})},f.a.createElement("div",{className:"treatmentCodeButtonCode"},n.code),f.a.createElement("div",{className:"treatmentCodeButtonName"},n.name));var o})),f.a.createElement("div",{className:"recentTreatmentsList"},f.a.createElement("div",{className:"recentText"},"Recent: "),Y.a.map(c,function(e,t){return f.a.createElement("div",{className:"recentTreatmentsButton",key:"recentTreatments"+t,onClick:n(e)},e)})),f.a.createElement("div",{className:"treatmentEditorDoneButton",onClick:function(t){return e.hideTreatmentEditor()}},"Done"))});n(67);function Qe(){var e=Object(E.a)(["init"]);return Qe=function(){return e},e}function Xe(){var e=Object(E.a)(["historySelector"]);return Xe=function(){return e},e}function et(){var e=Object(E.a)(["trello"]);return et=function(){return e},e}function tt(){var e=Object(E.a)(["windowSize"]);return tt=function(){return e},e}function rt(){var e=Object(E.a)(["treatmentEditorActive"]);return rt=function(){return e},e}var nt=Object(N.connect)({treatmentEditorActive:Object(C.state)(rt()),windowSize:Object(C.state)(tt()),trello:Object(C.state)(et()),historySelector:Object(C.state)(Xe()),init:Object(C.sequences)(Qe())},function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e="landscape"===this.props.windowSize.orientation?"row":"column",t=this.props.historySelector.active;return this.props.treatmentEditorActive?f.a.createElement("div",{className:"App",style:{flexDirection:"column"}},f.a.createElement(Ke,null)):f.a.createElement("div",{className:"App",style:{flexDirection:e}},f.a.createElement(Re,null),"group"===t||"time"===t?"":f.a.createElement(_e,null))}}]),t}(f.a.Component)),at=n(9),ct=n(4),ot=n(11),it=n.n(ot),ut=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),t}(ct.CerebralError),st=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),t}(ct.CerebralError),dt=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),t}(ct.CerebralError);function lt(){var e=Object(E.a)(["",""]);return lt=function(){return e},e}function ft(){var e=Object(E.a)(["trello.lists"]);return ft=function(){return e},e}function mt(){var e=Object(E.a)(["trello.lists.",""]);return mt=function(){return e},e}function bt(){var e=Object(E.a)(["trello.authorized"]);return bt=function(){return e},e}function vt(){var e=Object(E.a)(["trello.authorized"]);return vt=function(){return e},e}var gt="name,id,closed,desc,dateLastActivity,labels,idList";it.a.config({warnings:{wForgottenReturn:!1}});var Ot=[function(e){return e.trello.authorize().catch(function(e){throw e.message="Failed to authorize trello: "+e.message+JSON.stringify(e.stack),new dt(e)})},Object(at.a)(Object(ct.state)(vt()),!0)],ht=[Object(at.a)(Object(ct.state)(bt()),!1),Object(ct.sequence)("deauthorize->authorize",Ot)],jt={boards:{},lists:{}},pt=Object(ct.sequence)("trello.loadList",[function(e){var t=e.props,r=e.trello,n={};return it.a.try(function(){return jt.boards[t.boardName]?jt.boards[t.boardName]:jt.boards[t.boardName]=r.get("members/me/boards",{fields:"name,id,closed"}).filter(function(e){return e&&!e.closed}).then(function(e){var n=G.a.find(e,function(e){return e.name===t.boardName});return n||(console.log("Could not find board "+t.boardName+", creating it."),r.post("boards",{name:t.boardName}))})}).then(function(e){n.board=e}).then(function(){return r.get("boards/".concat(n.board.id,"/labels"),{fields:"id,name,color"})}).then(function(e){n.labels=e}).then(function(){return jt.lists[t.listName]?jt.lists[t.listName]:jt.lists[t.listName]=r.get("boards/".concat(n.board.id,"/lists"),{fields:"name,id,closed,cards"}).filter(function(e){return e&&!e.closed}).then(function(e){var a=G.a.find(e,function(e){return e.name===t.listName});return a||(console.log("Could not find list "+t.listName+", creating it."),r.post("boards/".concat(n.board.id,"/lists"),{name:t.listName}))})}).then(function(e){n.list=e}).then(function(){return n}).catch(function(e){throw e.message="Failed to get list "+t.listName+": "+e.message,new st(e)})},function(e){var t=e.props;return e.trello.get("lists/"+t.list.id+"/cards",{fields:gt}).filter(function(e){return e&&!e.closed}).then(function(e){return G.a.keyBy(G.a.map(e,function(e){return e.statePath="trello.lists.".concat(t.key,".").concat(e.id),e}),function(e){return e.id})}).then(function(e){return{cards:e}}).catch(function(e){throw e.message="Failed to get cards for list "+t.listName+": "+e.message,new st(e)})},function(e){var t=e.props,r=e.store;e.get;r.set(Object(ct.state)(mt(),t.key),{id:t.list.id,name:t.list.name,cards:t.cards,board:t.board,labels:t.labels})}]),yt=Object(ct.sequence)("trello.reloadOneCard",[function(e){var t=e.trello,r=e.props,n=e.store,a=e.get;if(r.card&&r.card.id)return t.get("cards/".concat(r.card.id),{fields:gt}).then(function(e){var t=a(Object(ct.state)(ft())),r=G.a.find(t,function(t,r){return t.id===e.idList}),c="trello.lists.".concat(r.name.toLowerCase(),".cards.").concat(e.id);return e.statePath=c,n.set(Object(ct.state)(lt(),c),e),{card:e}})}]),Et=Object(ct.sequence)("trello.putCard",[function(e){var t=e.trello,r=e.props;return it.a.try(function(){var e="cards/";return r.card.id?(e+=r.card.id+"/",t.put(e,{name:r.card.name,idList:r.card.idList})):t.post(e,{name:r.card.name,idList:r.card.idList})}).catch(function(e){throw new ut("Failed to save to card",e)})},yt]),Nt=Object(ct.sequence)("trello.addLabelToCard",[function(e){var t=e.trello,r=e.props;t.post("cards/".concat(r.card.id,"/idLabels"),{value:r.idLabel})},yt]);function Ct(){var e=Object(E.a)(["treatments.treatmentCodes"]);return Ct=function(){return e},e}function wt(){var e=Object(E.a)(["treatments.colors"]);return wt=function(){return e},e}function kt(){var e=Object(E.a)(["treatments.tagIndex"]);return kt=function(){return e},e}function St(){var e=Object(E.a)(["treatments.records"]);return St=function(){return e},e}function Rt(){var e=Object(E.a)(["incoming.records"]);return Rt=function(){return e},e}function Tt(){var e=Object(E.a)(["treatments.records"]);return Tt=function(){return e},e}function Dt(){var e=Object(E.a)(["trello.lists.treatments.id"]);return Dt=function(){return e},e}function Lt(){var e=Object(E.a)(["treatments.records"]);return Lt=function(){return e},e}var qt=[function(e){var t=e.props,r=(e.store,!1),n=(0,e.get)(Object(ct.state)(Lt())),a=G.a.find(n,function(e){return e.date===t.record.date&&e.treatment===t.record.treatment});return a?G.a.find(a.tags,function(e){return t.record.tag.color===e.color&&t.record.tag.number===e.number})?{record:a}:((r=G.a.cloneDeep(a)).tags.push(t.record.tag),{record:r}):((r=G.a.cloneDeep(t.record)).tags=[r.tag],{record:r})},function(e){var t=e.props,r=(e.store,e.get);return{card:{id:t.record.id,idList:t.record.idList||r(Object(ct.state)(Dt())),name:t.record.date+": "+t.record.treatment+": "+G.a.join(G.a.map(t.record.tags,function(e){return e.color+e.number})," ")}}},Et],Yt=function(e){if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}):(.*)$/);if(!t||t.length<3)return null;var r=t[1].trim(),n=t[2].trim(),a=n.match(/^(.+):(.*)$/);if(!a||a.length<3)return null;var c=a[1].trim();return n=a[2].trim(),{date:r,treatment:c,tags:G.a.map(G.a.split(n," "),U),id:e.id,idList:e.idList,cardName:e.name,dateLastActivity:e.dateLastActivity}},xt=Object(ct.sequence)("treatments.fetch",[function(){return{boardName:"Livestock",listName:"Treatments",key:"treatments"}},pt,function(e){var t=e.props;return e.store.set(Object(ct.state)(Tt()),G.a.map(t.cards,Yt))},function(e){e.props;var t=e.get,r=e.store,n=t(Object(ct.state)(Rt())),a=t(Object(ct.state)(St())),c=G.a.reduce(a,function(e,t){return t.tags?(G.a.each(t.tags,function(r){var a=Z(r),c=V(n,r,t.date);c||(c={groupname:"NONE"}),e[a]||(e[a]={}),e[a][c.groupname]||(e[a][c.groupname]={group:c,treatments:[]}),e[a][c.groupname].treatments.push({date:t.date,treatment:t.treatment})}),e):e},{});r.set(Object(ct.state)(kt()),c)}]),Bt=Object(ct.sequence)("treatments.fetchConfig",[function(){return{boardName:"Livestock",listName:"Config",key:"livestockConfig"}},pt,Object(ct.sequence)("saveColors",[function(e){var t=e.props;return e.store.set(Object(ct.state)(wt()),function(e){return e?JSON.parse(e.desc):null}(G.a.find(t.cards,function(e){return"Tag Colors"===e.name})))}]),Object(ct.sequence)("saveCodes",[function(e){var t=e.props;return e.store.set(Object(ct.state)(Ct()),function(e){return e?JSON.parse(e.desc):null}(G.a.find(t.cards,function(e){return"Treatment Types"===e.name})))}])]),zt={sequences:o,state:{treatmentCodes:[{code:"Z",name:"Zuprevo"},{code:"Za",name:"Zactran"},{code:"Dr",name:"Draxxin"},{code:"N",name:"Nuflor"},{code:"No",name:"Noromycin"},{code:"P",name:"Pennicillin"},{code:"Px",name:"Polyflex"},{code:"By",name:"Baytril"},{code:"Ex",name:"Excenel"},{code:"S",name:"Sulfa"},{code:"D",name:"Dex"},{code:"E",name:"Electrolytes"},{code:"Ht",name:"High Temp"},{code:"Lt",name:"Low Temp"},{code:"Nt",name:"No Temp"}],colors:{ORANGE:"#FF9900",YELLOW:"#E9E602",MARTYELL:"#FF00FF",BLACK:"#000000",RED:"#FF0000",WHITE:"#FFFFFF"},records:[]}},At=n(31);function Mt(){var e=Object(E.a)(["incoming.records.",".dead"]);return Mt=function(){return e},e}function Ft(){var e=Object(E.a)(["incoming.records"]);return Ft=function(){return e},e}function It(){var e=Object(E.a)(["dead.records"]);return It=function(){return e},e}function Pt(){var e=Object(E.a)(["incoming.records"]);return Pt=function(){return e},e}var Gt=function(e){if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}):? *([^;]+);(.*)$/),r={};r.date=t[1],r.groupname=t[2];var n=t[3].split(";");return G.a.each(n,function(e){var t=e.trim().split(":"),n=Object(At.a)(t,2),a=n[0],c=n[1];r[a.toLowerCase().trim()]=c.trim()}),r.tags&&(r.tags=r.tags.replace(/ /g,""),r.tag_ranges=G.a.reduce(r.tags.split(","),function(e,t){var r=G.a.map(t.split("-"),U),n=Object(At.a)(r,2),a=n[0],c=n[1];return a.color!==c.color?(e.push({start:a,end:{color:a.color,number:1e3}}),e.push({start:{color:c.color,number:1},end:c}),e):(e.push({start:a,end:c}),e)},[])),r.id=e.id,r.idList=e.idList,r.cardName=e.name,r.dateLastActivity=e.dateLastActivity,r},Wt=Object(ct.sequence)("incoming.fetch",[function(){return{boardName:"Livestock",listName:"Incoming",key:"incoming"}},pt,function(e){var t=e.props;return e.store.set(Object(ct.state)(Pt()),G.a.map(t.cards,Gt))}]),$t=Object(ct.sequence)("incoming.computeStats",[function(e){var t=e.get,r=e.store,n=t(Object(ct.state)(It())),a=t(Object(ct.state)(Ft())),c=G.a.reduce(n,function(e,t){return t.tags||console.log("incoming.computeStats: WARNING: dead record has no tags.  Card name = ",t.cardName),G.a.each(t.tags,function(r){var n=V(a,r,t.date);n&&(e[n.groupname]||(e[n.groupname]=[]),e[n.groupname].push({date:t.date,tag:r}))}),e},{});G.a.each(a,function(e,t){r.set(Object(ct.state)(Mt(),t),c[e.groupname]||[])})}]),_t={sequences:i,state:{records:[]}};function Ht(){var e=Object(E.a)(["trello.lists.dead.id"]);return Ht=function(){return e},e}function Vt(){var e=Object(E.a)(["dead.records"]);return Vt=function(){return e},e}function Ut(){var e=Object(E.a)(["dead.records"]);return Ut=function(){return e},e}function Zt(){var e=Object(E.a)(["dead.tagIndex.",""]);return Zt=function(){return e},e}function Jt(){var e=Object(E.a)(["dead.tagIndex.",""]);return Jt=function(){return e},e}function Kt(){var e=Object(E.a)(["incoming"]);return Kt=function(){return e},e}function Qt(){var e=Object(E.a)(["dead.records"]);return Qt=function(){return e},e}function Xt(){var e=Object(E.a)(["dead.records.",""]);return Xt=function(){return e},e}function er(){var e=Object(E.a)(["dead.records"]);return er=function(){return e},e}function tr(){var e=Object(E.a)(["dead.tagIndex"]);return tr=function(){return e},e}function rr(){var e=Object(E.a)(["incoming.records"]);return rr=function(){return e},e}function nr(){var e=Object(E.a)(["dead.errors"]);return nr=function(){return e},e}function ar(){var e=Object(E.a)(["dead.records"]);return ar=function(){return e},e}var cr=function(e){try{if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}):?(.*)$/),r=t[1],n=t[2];t=n.match(/[Nn][Oo][Tt][Ee]:(.*)$/);var a=!1;t&&(a=t[1]);var c=(n=n.replace(/\(.*\)/g,"")).match(/([A-Za-z']+ ?([0-9]+)?)/g);c=G.a.map(c,function(e){return e.trim()}),c=G.a.map(c,function(e){return"NT"===e?"NOTAG1":e});var o=G.a.filter(c,function(e){return!e.match(/^[NSB][0-9S]{1,2}$/i)&&!e.match(/^OB[SN]?[NS]?$/)&&!e.match(/^HB$/i)&&!e.match(/^HEIFER$/i)&&!e.match(/^DRY( ?(LOT|COW))?$/i)&&!e.match(/^DAIRY$/i)&&!e.match(/^APRIL'?S?$/i)&&!e.match(/^WOODS$/i)&&!e.match(/^BARN ?[1-3]$/i)&&!e.match(/^dead/i)&&!e.match(/^total/i)&&!e.match(/^and/i)});return o=G.a.map(o,function(e){return e.toUpperCase().replace(/ /g,"")}),o=G.a.map(o,function(e){return"NOTAG"===e?"NOTAG1":e}),{date:r,tags:o=G.a.map(o,U),note:a,id:e.id,idList:e.idList,cardName:e.name,dateLastActivity:e.dateLastActivity}}catch(i){return{cardName:e.name,idList:e.idList,id:e.id,error:i.toString()}}},or=Object(ct.sequence)("dead.fetch",[function(){return{boardName:"Livestock",listName:"Dead",key:"dead"}},pt,function(e){var t=e.props,r=e.store,n=e.get,a=G.a.reduce(t.cards,function(e,t){var r=cr(G.a.cloneDeep(t));return r.error?e.errors.push(r):e.records.push(r),e},{errors:[],records:[]}),c=a.errors,o=a.records;r.set(Object(ct.state)(ar()),o),r.set(Object(ct.state)(nr()),c);var i=n(Object(ct.state)(rr())),u=G.a.reduce(o,function(e,t){return t.tags?(G.a.each(t.tags,function(r){var n=Z(r),a=V(i,r,t.date);a||(a={groupname:"NONE"}),e[n]||(e[n]={}),e[n][a.groupname]=t.date}),e):e},{});r.set(Object(ct.state)(tr()),u)}]),ir=Object(ct.sequence)("dead.reloadOneRecord",[function(e){var t=e.props,n=e.store,a=e.get,c=a(Object(ct.state)(er())),o=G.a.findIndex(c,function(e){return e.id===t.card.id}),i=cr(t.card);o>=0?n.set(Object(ct.state)(Xt(),o),i):n.push(Object(ct.state)(Qt()),i);var u=a(Object(ct.state)(Kt()));return G.a.each(i.tags,function(e){var t=Z(e),c=V(u,e,i.date);c||(c={groupname:"NONE"});var o=G.a.clone(a(Object(ct.state)(Jt(),t))),s=G.a.clone(o)||{};s[c.groupname]=r.date,n.set(Object(ct.state)(Zt(),t),s)}),{record:i}}]),ur=Object(ct.sequence)("dead.saveDead",[function(e){var t=e.props,r=(e.store,(0,e.get)(Object(ct.state)(Ut()))),n=$()(t.record.date,"YYYY-MM-DD").subtract(14,"days"),a=$()(t.record.date,"YYYY-MM-DD").add(14,"days");if(G.a.find(r,function(e){var r=$()(e.date,"YYYY-MM-DD");return!(!n.isBefore(r)||!a.isAfter(r))&&!!G.a.find(e.tags,function(e){return e.color===t.record.tag.color&&e.number===t.record.tag.number})}))return{alreadyDead:!0}},function(e){var t=e.props,r=(e.store,e.get);if(!t.alreadyDead){var n=!1,a=r(Object(ct.state)(Vt())),c=G.a.find(a,function(e){return e.date===t.record.date});return c?((n=G.a.cloneDeep(c)).tags.push(t.record.tag),{record:n}):((n=G.a.cloneDeep(t.record)).tags=[n.tag],{record:n})}},function(e){var t=e.props,r=(e.store,e.get),n=t.record.card||{};return n.id=t.record.id,n.idList=t.record.idList||r(Object(ct.state)(Ht())),n.name=t.record.date+": "+G.a.join(G.a.map(t.record.tags,function(e){return e.color+e.number})," ")+(t.record.note?"Note: "+t.record.note:""),{card:n}},Et,ir]),sr={sequences:u,state:{tagIndex:{},records:[]}},dr={sequences:c,state:{authorized:!1,lists:{}}};function lr(){var e=Object(E.a)(["windowSize.isSmall"]);return lr=function(){return e},e}function fr(){var e=Object(E.a)(["windowSize.isSmall"]);return fr=function(){return e},e}function mr(){var e=Object(E.a)(["windowSize.orientation"]);return mr=function(){return e},e}function br(){var e=Object(E.a)(["windowSize.orientation"]);return br=function(){return e},e}var vr=Object(ct.sequence)("windowSize.resized",[function(e){var t=e.windowSize,r=e.props,n=e.store,a=e.get;a(Object(ct.state)(br()))!==t.orientation()&&n.set(Object(ct.state)(mr()),t.orientation());var c="portrait"===t.orientation()?r.width<767:r.height<500;a(Object(ct.state)(fr()))!==c&&n.set(Object(ct.state)(lr()),c)}]),gr=Object(ct.sequence)("windowSize.init",[function(e){return e.windowSize.init("windowSize.resized")},vr]),Or={sequences:s,state:{isSmall:!0,orientation:"portrait"}},hr=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),t}(ct.CerebralError),jr=Object(ct.Provider)({authorize:function(){return it.a.try(function(){var e=0;return it.a.try(function t(){if(window.Trello)return!0;if(e++>50)throw hr("Could not load Trello client library");return it.a.delay(250).then(t)})}).then(function(){return new it.a(function(e,t){return window.Trello.authorize({type:"redirect",name:"Ault Farms - Invoices",persist:!0,scope:{read:"true",write:"true"},expiration:"never",success:e,error:function(e){console.log("Failed to authorize Trello: err = ",e),t(e)}}),null})})},deauthorize:function(){return new it.a(function(e,t){window.Trello.deauthorize(),e()})},get:function(e,t){return new it.a(function(r,n){return window.Trello.get(e,t||{},r,function(e){console.log("Trello.get ERROR: ",e),n(e)})})},put:function(e,t){return new it.a(function(r,n){return window.Trello.put(e,t,r,function(e){console.log("Trello.put ERROR: ",e),n(e)})})},post:function(e,t){return new it.a(function(r,n){return window.Trello.post(e,t,r,function(e){console.log("Trello.post ERROR: ",e),n(e)})})}});function pr(){var e=Object(E.a)(["",""]);return pr=function(){return e},e}function yr(){var e=Object(E.a)(["",""]);return yr=function(){return e},e}var Er=function(){return{width:window.innerWidth,height:window.innerHeight}},Nr="",Cr={dimensions:function(){return Er()},orientation:function(){var e=Er();return e.width>e.height?"landscape":"portrait"},windowResized:function(){this.context.get(Object(ct.sequences)(yr(),Nr))(Er())},init:function(e){Nr=e,window.addEventListener("resize",Cr.windowResized.bind(this)),this.context.get(Object(ct.sequences)(pr(),e))(Er())}},wr=Cr;function kr(){var e=Object(E.a)(["msg"]);return kr=function(){return e},e}function Sr(){var e=Object(E.a)(["recordsValid"]);return Sr=function(){return e},e}function Rr(){var e=Object(E.a)(["msg"]);return Rr=function(){return e},e}function Tr(){var e=Object(E.a)(["msg"]);return Tr=function(){return e},e}function Dr(){var e=Object(E.a)(["msg"]);return Dr=function(){return e},e}function Lr(){var e=Object(E.a)(["historySelector.active"]);return Lr=function(){return e},e}function qr(){var e=Object(E.a)(["record.tag.number"]);return qr=function(){return e},e}function Yr(){var e=Object(E.a)(["record.is_saved"]);return Yr=function(){return e},e}function xr(){var e=Object(E.a)(["recordsValid"]);return xr=function(){return e},e}function Br(){var e=Object(E.a)(["msg"]);return Br=function(){return e},e}function zr(){var e=Object(E.a)(["msg"]);return zr=function(){return e},e}function Ar(){var e=Object(E.a)(["recordsValid"]);return Ar=function(){return e},e}function Mr(){var e=Object(E.a)(["record"]);return Mr=function(){return e},e}function Fr(){var e=Object(E.a)(["record"]);return Fr=function(){return e},e}function Ir(){var e=Object(E.a)(["record.is_saved"]);return Ir=function(){return e},e}function Pr(){var e=Object(E.a)(["record.tag.number"]);return Pr=function(){return e},e}function Gr(){var e=Object(E.a)(["record.tag.number"]);return Gr=function(){return e},e}function Wr(){var e=Object(E.a)(["record.tag.color"]);return Wr=function(){return e},e}function $r(){var e=Object(E.a)(["record.treatment"]);return $r=function(){return e},e}function _r(){var e=Object(E.a)(["record.date"]);return _r=function(){return e},e}function Hr(){var e=Object(E.a)(["historySelector.active"]);return Hr=function(){return e},e}function Vr(){var e=Object(E.a)(["record.is_saved"]);return Vr=function(){return e},e}function Ur(){var e=Object(E.a)(["sort"]);return Ur=function(){return e},e}function Zr(){var e=Object(E.a)(["historyGroup.sort"]);return Zr=function(){return e},e}function Jr(){var e=Object(E.a)(["active"]);return Jr=function(){return e},e}function Kr(){var e=Object(E.a)(["historySelector.active"]);return Kr=function(){return e},e}function Qr(){var e=Object(E.a)(["treatmentEditorActive"]);return Qr=function(){return e},e}function Xr(){var e=Object(E.a)(["treatmentEditorActive"]);return Xr=function(){return e},e}function en(){var e=Object(E.a)(["msg"]);return en=function(){return e},e}function tn(){var e=Object(E.a)(["msg"]);return tn=function(){return e},e}function rn(){var e=Object(E.a)(["record.is_saved"]);return rn=function(){return e},e}function nn(){var e=Object(E.a)(["msg"]);return nn=function(){return e},e}function an(){var e=Object(E.a)(["trello.authorized"]);return an=function(){return e},e}var cn=Object(ct.sequence)("updateMsg",[function(e){var t=e.props,r=e.get,n=e.store;return t.msg?C.state.set("msg",t.msg):r(Object(C.state)(an()))?r(Object(C.state)(rn()))?n.set(Object(C.state)(tn()),{type:"good",text:"Treatment record saved."}):void n.set(Object(C.state)(en()),{type:"bad",text:"Treatment record not saved"}):n.set(Object(C.state)(nn()),{type:"bad",text:"You are not logged in to Trello."})}]),on=Object(ct.sequence)("app.showTreatmentEditor",[Object(at.a)(Object(C.state)(Xr()),!0)]),un=Object(ct.sequence)("app.hideTreatmentEditor",[Object(at.a)(Object(C.state)(Qr()),!1)]),sn=Object(ct.sequence)("app.historySelectionChangeRequested",[Object(at.a)(Object(C.state)(Kr()),Object(C.props)(Jr()))]),dn=Object(ct.sequence)("app.historyGroupSortClicked",[Object(at.a)(Object(C.state)(Zr()),Object(C.props)(Ur()))]),ln=Object(ct.sequence)("app.changeRecord",[function(e){var t=e.props,r=e.store;(0,e.get)(Object(C.state)(Vr()))&&!t.date&&r.set(Object(C.state)(Hr()),"tag"),t.date&&r.set(Object(C.state)(_r()),t.date),t.treatment&&r.set(Object(C.state)($r()),t.treatment),t.tag&&"string"===typeof t.tag.color&&(r.set(Object(C.state)(Wr()),t.tag.color),"NOTAG"===t.tag.color&&r.set(Object(C.state)(Gr()),"1")),!t.tag||"string"!==typeof t.tag.number&&"number"!==typeof t.tag.number||r.set(Object(C.state)(Pr()),+t.tag.number),t.date||r.set(Object(C.state)(Ir()),!1)},cn]),fn=Object(ct.sequence)("app.logout",[ht,Ot]),mn=Object(ct.sequence)("app.saveRecord",[Object(at.a)(Object(C.props)(Fr()),Object(C.state)(Mr())),Object(at.a)(Object(C.state)(Ar()),!1),Object(at.a)(Object(C.state)(zr()),{type:"good",text:"Saving card..."}),qt,Object(at.a)(Object(C.state)(Br()),{type:"good",text:"Refreshing records..."}),xt,Object(at.a)(Object(C.state)(xr()),!0),Object(at.a)(Object(C.state)(Yr()),!0),Object(at.a)(Object(C.state)(qr()),""),Object(at.a)(Object(C.state)(Lr()),"date"),cn]),bn=Object(ct.sequence)("app.init",[gr,Object(at.a)(Object(C.state)(Dr()),{type:"good",text:"Checking trello authorization..."}),Ot,Object(at.a)(Object(C.state)(Tr()),{type:"good",text:"Fetching records..."}),Wt,Object(ct.parallel)("app.init.parallel",[xt,Bt,or]),Object(at.a)(Object(C.state)(Rr()),{type:"good",text:"Computing stats..."}),$t,Object(at.a)(Object(C.state)(Sr()),!0),Object(at.a)(Object(C.state)(kr()),{type:"good",text:"Loaded successfully."})]);function vn(){var e=Object(E.a)(["msg"]);return vn=function(){return e},e}function gn(){var e=Object(E.a)(["msg"]);return gn=function(){return e},e}function On(){var e=Object(E.a)(["msg"]);return On=function(){return e},e}var hn={sequences:d,state:{recordsValid:!1,treatmentEditorActive:!1,historySelector:{active:"date"},historyGroup:{sort:"date"},msg:{type:"bad",text:"Treatment record not saved."},record:{date:I()().format("YYYY-MM-DD"),treatment:"NoExHt",tag:{color:"",number:0},is_saved:!0}},modules:{treatments:zt,incoming:_t,dead:sr,trello:dr,windowSize:Or},providers:{trello:jr,windowSize:wr},catch:[[ut,[Object(at.a)(Object(C.state)(On()),"ERROR: failed to save in Trello")]],[st,[Object(at.a)(Object(C.state)(gn()),"ERROR: failed to get in Trello")]],[dt,[Object(at.a)(Object(C.state)(vn()),"ERROR: failed to authorize in Trello")]]]},jn=(n(81),n(70),n(79),Object(ct.default)(hn,{devtools:null}));b.a.render(f.a.createElement(N.Container,{app:jn},f.a.createElement(nt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/treatments",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/treatments","/service-worker.js");v?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):g(e)})}}()}},[[39,1,2]]]);
//# sourceMappingURL=main.31cc880d.chunk.js.map